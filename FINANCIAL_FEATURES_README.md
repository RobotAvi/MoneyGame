# Финансовая функциональность в создании персонажа

## Обзор

Добавлена расширенная функциональность для ввода и управления финансовыми данными при создании персонажа в игре "Финансовый успех".

## Новые возможности

### 1. Финансовая информация
- **Зарплата** - основная зарплата персонажа
- **Дополнительные доходы** - подработка, фриланс, инвестиции
- **Расходы на питание** - ежемесячные траты на еду
- **Расходы на транспорт** - проезд, топливо, обслуживание
- **Расходы на жилье** - аренда, коммунальные услуги
- **Прочие расходы** - развлечения, покупки, услуги
- **Начальный капитал** - стартовые деньги персонажа

### 2. Автоматическое заполнение
При выборе профессии финансовые поля автоматически заполняются на основе данных профессии:
- Зарплата устанавливается из карточки профессии
- Расходы распределяются по категориям (40% питание, 15% транспорт, 30% жилье, 15% прочее)

### 3. Финансовая сводка
Реальное время отображается:
- Общий доход (зарплата + доп. доходы + доход супруга)
- Общие расходы (все категории + расходы на детей)
- Денежный поток (доходы - расходы)
- Ежемесячные сбережения (процент от дохода)

### 4. Финансовые шаблоны
#### Встроенные шаблоны:
- **Студент** - низкий доход, базовые расходы
- **Офисный работник** - средний доход, стандартные расходы
- **Предприниматель** - высокий доход от бизнеса
- **IT-специалист** - высокий доход, современные расходы

#### Пользовательские шаблоны:
- Возможность сохранить текущие финансовые настройки как шаблон
- Загрузка сохраненных шаблонов
- Управление через диалоговые окна

### 5. Валидация данных
- Проверка на отрицательные значения
- Валидация всех финансовых полей
- Информативные сообщения об ошибках

## Техническая реализация

### Новые файлы:
- `FinancialTemplates.kt` - управление финансовыми шаблонами
- `summary_background.xml` - фон для финансовой сводки

### Измененные файлы:
- `activity_character_creation.xml` - добавлены новые поля и кнопки
- `CharacterCreationActivity.kt` - добавлена логика обработки финансовых данных

### Ключевые методы:
- `updateFinancialFieldsFromProfession()` - заполнение полей из профессии
- `updateFinancialSummary()` - расчет и отображение сводки
- `showTemplateSelectionDialog()` - диалог выбора шаблона
- `saveCurrentAsTemplate()` - сохранение текущих настроек

## Использование

### Создание персонажа:
1. Выберите профессию → поля заполнятся автоматически
2. Настройте финансовые данные вручную при необходимости
3. Используйте кнопку "Сбросить к профессии" для возврата к базовым значениям
4. Загрузите готовый шаблон или сохраните свои настройки
5. Просматривайте финансовую сводку в реальном времени

### Управление шаблонами:
- **Загрузить шаблон** - выбор из встроенных или пользовательских шаблонов
- **Сохранить шаблон** - сохранение текущих настроек с пользовательским названием

## Интеграция с игрой

Финансовые данные передаются в `Player` объект и используются в игровом процессе:
- Зарплата влияет на ежемесячный доход
- Расходы определяют ежемесячные траты
- Начальный капитал устанавливает стартовые деньги
- Все данные учитываются в расчете денежного потока

## Преимущества

1. **Реалистичность** - детализированные финансовые данные
2. **Гибкость** - возможность настройки под любой сценарий
3. **Удобство** - автоматическое заполнение и шаблоны
4. **Прозрачность** - четкая финансовая сводка
5. **Персонализация** - сохранение пользовательских настроек